<form [formGroup]='form'>

  <div class="form-group">
    <label for="firstname" class="col-sm-3 col-form-label"> {{ 'user.form.firstName' | translate }} *</label>
    <div class="col-sm-12">
      <input type="text" class="form-control" id="firstname" formControlName='firstName'
             placeholder="{{ 'user.form.firstName' | translate }} " required>
      <span *ngIf="(firstName.dirty || firstName.touched) && firstName.invalid && firstName.errors.required"
            class="err-message">
         {{ 'user.form.firstNameErrorRequired' | translate }}
      </span>
    </div>
  </div>
  <div class="form-group">
    <label for="lastname" class="col-sm-3 col-form-label">{{ 'user.form.lastName' | translate }} *</label>
    <div class="col-sm-12">
      <input type="text" class="form-control" id="lastname" formControlName='lastName'
             placeholder="{{ 'user.form.lastName' | translate }}" required>
      <span *ngIf="(lastName.dirty || lastName.touched) && lastName.invalid && lastName.errors.required"
            class="err-message">
        {{ 'user.form.lastNameErrorRequired' | translate }}
      </span>
    </div>
  </div>
  <div class="form-group">
    <label for="email" class="col-sm-3 col-form-label">{{ 'user.form.emailAddress' | translate }} *</label>
    <div class="col-sm-12">
      <input type="email" class="form-control" id="email" formControlName='emailAddress' (change)="errorMessage = ''"
             placeholder="{ 'user.form.emailAddress' | translate }}" required>
      <span *ngIf="(emailAddress.dirty || emailAddress.touched) && emailAddress.invalid && emailAddress"
            class="err-message">
        <span *ngIf="emailAddress.errors.email || emailAddress.errors.pattern">
          {{ 'user.form.emailAddressErrorRequired' | translate }}
        </span>
        <span *ngIf="emailAddress.errors.required">
          {{ 'user.form.emailAddressErrorNotValid' | translate }}
        </span>
      </span>
      <span *ngIf="errorMessage !==''" class="err-message">
        {{errorMessage}}
      </span>
    </div>
  </div>

  <div class="form-group" *ngIf="!user?.id">
    <label for="password" class="col-sm-3 col-form-label">{{ 'user.common.password' | translate }} *</label>
    <div class="col-sm-12">
      <input type="password" class="form-control" id="password" formControlName='password'
             placeholder="{{ 'user.common.password' | translate }}" required>
      <span *ngIf="(password.dirty || password.touched) && password.invalid && password" class="err-message">
        <span *ngIf="password.errors.required">
         {{ 'user.form.passwordErrorRequired' | translate }}
        </span>
        <span *ngIf="password.errors.pattern">
          {{ 'user.form.passwordErrorNotValid' | translate }} <br/>
          {{ 'user.form.passwordErrorRules' | translate }}
        </span>
      </span>
    </div>
  </div>

  <div class="form-group">
    <nb-checkbox status="success" class="col-sm-4" formControlName='active'>{{ 'user.form.active' | translate }}</nb-checkbox>
  </div>

  <div class="form-group">
    <label class="col-sm-3 col-form-label">{{ 'user.form.defaultLanguage' | translate }} *</label>
    <div class="col-sm-12">
      <nb-select *ngIf="languages.length" placeholder="{{ 'user.form.selectLanguage' | translate }}" formControlName='defaultLanguage' outline
                 shape="rectangle">
        <nb-option *ngFor="let language of languages" [value]="language.code">{{ language.code }}</nb-option>
      </nb-select>
    </div>
  </div>

  <div class="form-group">
    <label class="col-sm-3 col-form-label">{{ 'user.form.groups' | translate }} *</label>
    <div class="col-sm-12 group-block">
      <nb-checkbox *ngFor="let group of groups" status="success" [value]="userHasRole(group)" (change)="addRole(group)">
        {{ group.name }}
      </nb-checkbox>
    </div>
  </div>

  <hr/>

  <div class="form-group actions-button">
    <button type="submit" class="btn btn-primary" (click)="save()" [disabled]="!form.valid && !user?.id">{{ 'common.save' | translate }}</button>
    <button *ngIf="!showRemoveButton" type="submit" class="btn btn-danger" (click)="remove()">{{ 'common.remove' | translate }}</button>
  </div>

</form>
